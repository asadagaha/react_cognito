{"ast":null,"code":"var _jsxFileName = \"/Users/tsushimakatsu/Desktop/source/workout/cognito_login/src/SignIn.tsx\",\n  _s = $RefreshSig$();\nimport { Alert, Button, Container, Stack, TextField } from \"@mui/material\";\nimport * as AmazonCognitoIdentity from \"amazon-cognito-identity-js\";\nimport { getUserPool } from \"./config\";\nimport { useForm } from \"react-hook-form\";\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const SignIn = () => {\n  _s();\n  const {\n    register,\n    handleSubmit\n  } = useForm();\n  const [message, setMessage] = useState(\"サインアップ成功\");\n  const signIn = data => {\n    const userPool = getUserPool();\n    const userData = {\n      Username: data.email,\n      Pool: userPool\n    };\n    const authenticationData = {\n      Username: data.email,\n      Password: data.password\n    };\n    const authenticationDetails = new AmazonCognitoIdentity.AuthenticationDetails(authenticationData);\n    const cognitoUser = new AmazonCognitoIdentity.CognitoUser(userData);\n    cognitoUser.authenticateUser(authenticationDetails, {\n      onSuccess: result => {\n        const accessToken = result.getAccessToken().getJwtToken();\n        const idToken = result.getIdToken().getJwtToken();\n        const refreshToken = result.getRefreshToken().getToken();\n        const expires = result.getAccessToken().getExpiration() * 1000;\n        console.log(accessToken);\n        console.log(idToken);\n        console.log(refreshToken);\n        console.log(expires);\n        setMessage(\"サインイン成功\");\n      },\n      onFailure: err => {\n        alert(err.message || JSON.stringify(err));\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"signIn\",\n    maxWidth: \"sm\",\n    sx: {\n      pt: 5\n    },\n    children: /*#__PURE__*/_jsxDEV(Stack, {\n      spacing: 2,\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"success\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        required: true,\n        label: \"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\",\n        type: \"email\",\n        ...register(\"email\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        required: true,\n        label: \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n        type: \"password\",\n        ...register(\"password\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleSubmit(signIn),\n        color: \"primary\",\n        variant: \"contained\",\n        children: \"\\u9001\\u4FE1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n_s(SignIn, \"dM41npZdA0Gr6k0yzFpezAYy6+E=\", false, function () {\n  return [useForm];\n});\n_c = SignIn;\nvar _c;\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"names":["Alert","Button","Container","Stack","TextField","AmazonCognitoIdentity","getUserPool","useForm","useState","SignIn","register","handleSubmit","message","setMessage","signIn","data","userPool","userData","Username","email","Pool","authenticationData","Password","password","authenticationDetails","AuthenticationDetails","cognitoUser","CognitoUser","authenticateUser","onSuccess","result","accessToken","getAccessToken","getJwtToken","idToken","getIdToken","refreshToken","getRefreshToken","getToken","expires","getExpiration","console","log","onFailure","err","alert","JSON","stringify","pt"],"sources":["/Users/tsushimakatsu/Desktop/source/workout/cognito_login/src/SignIn.tsx"],"sourcesContent":["import { Alert, Button, Container, Stack, TextField } from \"@mui/material\";\nimport * as AmazonCognitoIdentity from \"amazon-cognito-identity-js\";\nimport { getUserPool } from \"./config\";\nimport { SubmitHandler, useForm } from \"react-hook-form\";\nimport { useState } from \"react\";\n\ninterface SignInForm {\n  email: string;\n  password: string;\n}\n\nexport const SignIn = () => {\n  const { register, handleSubmit } = useForm<SignInForm>();\n  const [message, setMessage] = useState(\"サインアップ成功\");\n\n  const signIn: SubmitHandler<SignInForm> = (data) => {\n    const userPool = getUserPool();\n    const userData = {\n      Username: data.email,\n      Pool: userPool,\n    };\n\n    const authenticationData = {\n      Username: data.email,\n      Password: data.password,\n    };\n    const authenticationDetails =\n      new AmazonCognitoIdentity.AuthenticationDetails(authenticationData);\n\n    const cognitoUser = new AmazonCognitoIdentity.CognitoUser(userData);\n    cognitoUser.authenticateUser(authenticationDetails, {\n      onSuccess: (result) => {\n        const accessToken = result.getAccessToken().getJwtToken();\n        const idToken = result.getIdToken().getJwtToken();\n        const refreshToken = result.getRefreshToken().getToken();\n        const expires = result.getAccessToken().getExpiration() * 1000;\n        console.log(accessToken);\n        console.log(idToken);\n        console.log(refreshToken);\n        console.log(expires);\n        setMessage(\"サインイン成功\");\n      },\n\n      onFailure: (err) => {\n        alert(err.message || JSON.stringify(err));\n      },\n    });\n  };\n\n  return (\n    <Container className=\"signIn\" maxWidth=\"sm\" sx={{ pt: 5 }}>\n      <Stack spacing={2}>\n        <Alert severity=\"success\">{message}</Alert>\n        <TextField\n          required\n          label=\"メールアドレス\"\n          type=\"email\"\n          {...register(\"email\")}\n        />\n        <TextField\n          required\n          label=\"パスワード\"\n          type=\"password\"\n          {...register(\"password\")}\n        />\n        <Button\n          onClick={handleSubmit(signIn)}\n          color=\"primary\"\n          variant=\"contained\"\n        >\n          送信\n        </Button>\n      </Stack>\n    </Container>\n  );\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}